(this["webpackJsonpReactTodos-client"]=this["webpackJsonpReactTodos-client"]||[]).push([[0],{174:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),s=n.n(c),i=(n(173),n(174),n(20)),o=n(21),u=n.n(o),l=n(24),d=n(10),j=n(18),p=n(300),b=n(301),m=n(25),h=n(1),x=Object(a.createContext)();function O(e){var t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],c=n[1];return Object(h.jsx)(x.Provider,{value:{name:"Manish",user:r,setUser:c},children:e.children})}var f=function(e){var t=Object(a.useContext)(x).user;return Object(h.jsxs)(p.a,{bg:"light",expand:"lg",children:[Object(h.jsx)(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(h.jsx)(p.a.Collapse,{id:"basic-navbar-nav",children:Object(h.jsxs)(b.a,{className:"mr-auto",children:[Object(h.jsx)(m.b,{to:"/",children:"Todos"}),Object(h.jsx)(m.b,{style:{marginLeft:"10px"},to:"/add-form",children:"Add Todo"}),t?Object(h.jsx)("button",{onClick:e.onLogout,children:"Logout"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m.b,{style:{marginLeft:"10px"},to:"/signin",children:"SignIn"}),Object(h.jsx)(m.b,{style:{marginLeft:"10px"},to:"/signup",children:"SignUp"})]})]})})]})},v=n(28),g=n.n(v),w=n(286),y=n(142),S=n.n(y);var k=function(e){var t=e.height,n=e.width,a={loop:!0,autoplay:!0,animationData:e.animation,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return Object(h.jsx)("div",{children:Object(h.jsx)(S.a,{options:a,height:t,width:n})})};var E=function(e){var t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://assets5.lottiefiles.com/packages/lf20_0etcyzow.json");case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var s=e.todos;return s.length&&r?Object(h.jsxs)("div",{children:[Object(h.jsx)(k,{animation:r,width:500,height:500}),Object(h.jsx)("p",{children:"TodoList Component"}),s.map((function(e){return Object(h.jsx)("div",{children:Object(h.jsx)(m.b,{to:"/todo/".concat(e._id),children:e.name})})}))]}):Object(h.jsx)(w.a,{animation:"grow",variant:"dark"})},C="https://wdftoct-final.herokuapp.com/api";var D=function(e){var t=Object(j.h)().todoId,n=Object(a.useState)(null),r=Object(d.a)(n,2),c=r[0],s=r[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(C,"/todos/").concat(t),{withCredentials:!0});case 2:n=e.sent,s(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),!e.user)return Object(h.jsx)(j.a,{to:"/signin"});if(!c)return Object(h.jsx)(w.a,{animation:"grow",variant:"dark"});var i=e.btnDelete;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Todo Detail Component"}),Object(h.jsxs)("h4",{children:["Name: ",c.name]}),Object(h.jsxs)("h4",{children:["Desc: ",c.description]}),Object(h.jsx)("img",{src:c.image}),Object(h.jsx)("button",{children:Object(h.jsx)(m.b,{to:"/todo/".concat(c._id,"/edit"),children:"Edit"})}),Object(h.jsx)("button",{onClick:function(){i(c._id)},children:"Delete"})]})},I=n(287);var _=function(e){var t=Object(a.useContext)(x).name,n=e.btnSubmit;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("p",{children:["Name is ",t," "]}),Object(h.jsx)("input",{name:"name",type:"text",placeholder:"Enter name"}),Object(h.jsx)("input",{name:"description",type:"text",placeholder:"Enter desc"}),Object(h.jsx)("input",{type:"file",name:"myImage",accept:"image/png, image/jpg"}),Object(h.jsx)(I.a,{type:"submit",children:"Submit"})]})};var T=function(e){var t=Object(j.h)().todoId,n=Object(a.useState)(null),r=Object(d.a)(n,2),c=r[0],s=r[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(C,"/todos/").concat(t),{withCredentials:!0});case 2:n=e.sent,s(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),!c)return Object(h.jsx)(w.a,{animation:"grow",variant:"dark"});var i=e.btnEdit;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"Edit Component"}),Object(h.jsxs)("form",{onSubmit:function(e){i(e,c._id)},children:[Object(h.jsx)("input",{defaultValue:c.name,name:"name",type:"text",placeholder:"Enter name"}),Object(h.jsx)("input",{defaultValue:c.description,name:"description",type:"text",placeholder:"Enter desc"}),Object(h.jsx)("button",{type:"submit",children:"Edit"})]})]})},N=n(302),P=n(293),L=n(299),W=n(304),U=n(307),A=n(308),q=n(306),F=n(148),J=n(305),M=Object(F.a)();var R=function(e){var t=e.onSignIn;return Object(h.jsx)(J.a,{theme:M,children:Object(h.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(h.jsx)(P.a,{}),Object(h.jsxs)(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(h.jsx)(A.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(h.jsxs)(U.a,{component:"form",onSubmit:t,noValidate:!0,sx:{mt:1},children:[Object(h.jsx)(L.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(h.jsx)(L.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",helperText:e.myError?e.myError:"",error:!!e.myError}),Object(h.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(h.jsx)(W.a,{container:!0,children:Object(h.jsx)(W.a,{item:!0,children:Object(h.jsx)(m.b,{to:"/signup",children:"Don't have an account? Sign Up"})})})]})]})]})})},z=Object(F.a)();var B=function(e){var t=Object(j.g)(),n=function(){var e=Object(l.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a={username:n.target.username.value,email:n.target.email.value,password:n.target.password.value},e.next=4,g.a.post("".concat(C,"/signup"),a,{withCredentials:!0});case 4:t("/signin");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(J.a,{theme:z,children:Object(h.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(h.jsx)(P.a,{}),Object(h.jsxs)(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(h.jsx)(A.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(h.jsxs)(U.a,{component:"form",onSubmit:n,noValidate:!0,sx:{mt:1},children:[Object(h.jsx)(L.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoFocus:!0}),Object(h.jsx)(L.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),Object(h.jsx)(L.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(h.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(h.jsx)(W.a,{container:!0,children:Object(h.jsx)(W.a,{item:!0,children:Object(h.jsx)(m.b,{to:"/signin",children:"Already have an account? Sign In instead"})})})]})]})]})})},G=n(296),V=n(309),Y=n(297),Z=n(298);n(252);var K=function(){var e=[51.505,-.09];return Object(h.jsx)("div",{children:Object(h.jsxs)(G.a,{style:{width:"800px",height:"500px"},center:e,zoom:13,scrollWheelZoom:!1,children:[Object(h.jsx)(V.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(h.jsx)(Y.a,{position:e,children:Object(h.jsxs)(Z.a,{children:["A pretty CSS3 popup. ",Object(h.jsx)("br",{})," Easily customizable."]})})]})})},Q=n(149),H=n(145),X=n(146);var $=function(){return Object(h.jsx)("div",{style:{width:"500px",height:"600px"},children:Object(h.jsx)(Q.a,{plugins:[H.a,X.a],dateClick:function(e){alert(e.dateStr)}})})};var ee=function(){return Object(a.useEffect)((function(){!function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://widget.kommunicate.io/v2/kommunicate.app",document.getElementsByTagName("head")[0].appendChild(n),window.kommunicate=t,t._globals={appId:"99796ab26534ba4c81b61a86edf15bf",popupWidget:!0,automaticChatOpenOnNavigation:!0}}(document,window.kommunicate||{})}),[]),Object(h.jsx)("div",{})},te=n(147),ne=n(68);function ae(){var e=Object(ne.useStripe)(),t=Object(ne.useElements)(),n=Object(a.useState)(null),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),o=Object(d.a)(i,2),j=o[0],p=o[1];Object(a.useEffect)((function(){if(e){var t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then((function(e){switch(e.paymentIntent.status){case"succeeded":s("Payment succeeded!");break;case"processing":s("Your payment is processing.");break;case"requires_payment_method":s("Your payment was not successful, please try again.");break;default:s("Something went wrong.")}}))}}),[e]);var b=function(){var n=Object(l.a)(u.a.mark((function n(a){var r,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),e&&t){n.next=3;break}return n.abrupt("return");case 3:return p(!0),n.next=6,e.confirmPayment({elements:t,confirmParams:{return_url:"http://localhost:3000"}});case 6:r=n.sent,"card_error"===(c=r.error).type||"validation_error"===c.type?s(c.message):s("An unexpected error occured."),p(!1);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsxs)("form",{id:"payment-form",onSubmit:b,children:[Object(h.jsx)(ne.PaymentElement,{id:"payment-element"}),Object(h.jsx)("button",{disabled:j||!e||!t,id:"submit",children:Object(h.jsx)("span",{id:"button-text",children:j?Object(h.jsx)("div",{className:"spinner",id:"spinner"}):"Pay now"})}),c&&Object(h.jsx)("div",{id:"payment-message",children:c})]})}n(255);var re=Object(te.a)("pk_test_51K43BHSDNDED5cLrIMDvJu6n7xpQ7gKJy6Nvpg2GF9lGGNBPy7BPFz9ZT92ZDoxFTRY8m9NvmQkGnqEN9lGJETj000ZNUStfyR");function ce(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/create-payment-intent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:"xl-tshirt"}]})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r(n.clientSecret);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var c={clientSecret:n,appearance:{theme:"stripe"}};return Object(h.jsx)("div",{className:"App",children:n&&Object(h.jsx)(ne.Elements,{options:c,stripe:re,children:Object(h.jsx)(ae,{})})})}var se=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1];console.log(Object(a.useContext)(x));var c=Object(a.useContext)(x),s=c.user,o=c.setUser,p=Object(a.useState)(null),b=Object(d.a)(p,2),m=b[0],O=b[1],v=Object(a.useState)(!0),w=Object(d.a)(v,2),y=w[0],S=w[1],k=Object(j.g)();Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(C,"/todos"),{withCredentials:!0});case 2:return t=e.sent,r(t.data),e.prev=4,e.next=7,g.a.get("".concat(C,"/user"),{withCredentials:!0});case 7:n=e.sent,S(!1),o(n.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),S(!1);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(a.useEffect)((function(){k("/")}),[n,s]);var I=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target.myImage.files[0]),(a=new FormData).append("imageUrl",t.target.myImage.files[0]),e.next=6,g.a.post("".concat(C,"/upload"),a);case 6:return c=e.sent,console.log(c.data),s={name:t.target.name.value,description:t.target.description.value,completed:!1,image:c.data.image},e.next=11,g.a.post("".concat(C,"/create"),s,{withCredentials:!0});case 11:o=e.sent,r([o.data].concat(Object(i.a)(n)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={name:t.target.name.value,description:t.target.description.value,completed:!1},e.next=4,g.a.patch("".concat(C,"/todos/").concat(a),c,{withCredentials:!0});case 4:s=e.sent,console.log(s.data),i=n.map((function(e){return e._id==a&&(e.name=s.data.name,e.description=s.data.description),e})),r(i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat(C,"/todos/").concat(t));case 2:a=n.filter((function(e){return e._id!==t})),r(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:t.target.email.value,password:t.target.password.value},e.next=5,g.a.post("".concat(C,"/signin"),n,{withCredentials:!0});case 5:a=e.sent,o(a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),O(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(C,"/logout"),{},{withCredentials:!0});case 2:o(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y?Object(h.jsx)("p",{children:"Loading user info. . . "}):(console.log("manishhhhh"),Object(h.jsxs)("div",{children:[Object(h.jsx)(ce,{}),Object(h.jsx)(ee,{}),Object(h.jsx)($,{}),Object(h.jsx)(K,{}),Object(h.jsx)(f,{onLogout:W}),Object(h.jsx)("h1",{children:"Shopping List"}),Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{path:"/",element:Object(h.jsx)(E,{todos:n})}),Object(h.jsx)(j.b,{path:"/add-form",element:Object(h.jsx)(_,{btnSubmit:I})}),Object(h.jsx)(j.b,{path:"/todo/:todoId",element:Object(h.jsx)(D,{user:s,btnDelete:P})}),Object(h.jsx)(j.b,{path:"/todo/:todoId/edit",element:Object(h.jsx)(T,{btnEdit:N})}),Object(h.jsx)(j.b,{path:"/signin",element:Object(h.jsx)(R,{myError:m,onSignIn:L})}),Object(h.jsx)(j.b,{path:"/signup",element:Object(h.jsx)(B,{})})]})]}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(m.a,{children:Object(h.jsx)(O,{children:Object(h.jsx)(se,{})})})}),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.743213fd.chunk.js.map